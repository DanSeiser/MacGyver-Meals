<!DOCTYPE html>
<html class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" type="image/png" href="http://www.theredfork.org/wp-content/uploads/2015/07/Favicon-01.png">

    <title>MacGyver Meals</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="styesheet" href="assets/css/reset.html">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.3/css/bulma.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="container">
        <div class="notification is-dark">
            <p class="title">
                MacGyver Meals
            </p>
            <p class="subtitle">
                Make a Meal Worthy of
                <bold>MacGyver</bold>
            </p>
            <a class="link1" href="index.html">Home</a>
            <a class="link2" href="previoussearches.html">Previous Searches</a>
            <a class="link3" href="https://github.com/DanSeiser/MacGyver-Meals" target="_blank">Github</a>
        </div>

    </div>
    <section class="section">
        <div class="container">
            <div id="recipe-view"></div>

        </div>
    </section>
    <div class="container">
        <div class="field">
            <input type="text" class="input is-info" id="ingredient1" placeholder="Chicken">
            <br>
            <input type="text" class="input is-info" id="ingredient2" placeholder="Broccoli">
            <br>
            <input type="text" class="input is-info" id="ingredient3" placeholder="Soy Suace">
            <br>
            <button class="button is-primary is-medium is-danger" id="submit" type="submit">MacGyver It! </button>
        </div>
    </div>

    <div class="tile is-parent inline-block">
        <article class="tile box">
            <div class="content">
                <p class="title">MacGyver Meals</p>
                <p class="subtitle">The Recipe</p>
                <div class="recipe-return">
                    <!-- <p>MacGyver Meals - this could be the spot where the things and stuff go.</p> -->
                </div>
            </div>
        </article>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

    <script type="text/javascript">
        $("#submit").on("click", function(event) {
            event.preventDefault();

            first = $("#ingredient1").val().trim();
            second = $("#ingredient2").val().trim();
            third = $("#ingredient3").val().trim();
            var eyed;
            console.log(first + " " + second + " " + third)
            var queryURL = "https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/findByIngredients?fillIngredients=false&ingredients=" + first + "%2C" + second + "%2C" + third + "&limitLicense=false&number=10&ranking=1"
            $.ajax({
                url: queryURL,
                method: "GET",
                datatype: 'json',
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("X-Mashape-Authorization", "WV9z9ECdtMmsh1pDfZsZxoKdu9R7p1it0ZDjsnlsAash3p31Fr");
                }
            }).done(function(response) {
                $(".recipe-return").text(JSON.stringify(response));
                for (var i = 0; i < response.length; i++) {
                    var imgURL = response[i].image;
                    var eyed = response[i].id;
                    var eyeDiv = $("<p>");
                    var imgDiv = $("<div class='image'>");
                    var image = $("<img class='image is-128x128'>").attr("src", imgURL);
                    imgDiv.append(image);
                    eyeDiv.append(eyed);
                    $("#recipe-view").append(imgDiv);
                    $("#recipe-view").append(eyeDiv);
                    // console.log(response[i].id);
                    // console.log(response[i].image);                    
                }
                $.ajax({
                    url: "https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/" + response[0].id + "/summary",
                    method: "GET",
                    datatype: 'json',
                    beforeSend: function(xhr) {
                        xhr.setRequestHeader("X-Mashape-Authorization", "WV9z9ECdtMmsh1pDfZsZxoKdu9R7p1it0ZDjsnlsAash3p31Fr");
                    }
                }).done(function(response) {
                    console.log(response.summary)

                });
            });
        });
    </script>

</body>

</html>